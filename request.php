<!-- This html file displays the page allowing students to submit summer preference requests.-->

<html>
<head>
<link rel="stylesheet" href="csl.css">
</head>
<body >
<div id="header">
<h1><div><span>Cadet Summer Program Portal</span></div></h1>
</div>
<ul class="links">

  <li><a href="index.html">Home</a></li>
  <li><a href="final.php">Final Schedule</a></li>
  <li><a href="request.php">Make Requests</a></li>
  <li><a href="admin.php">Admin Schedule Approval</a></li>

</ul>
<br>

<h2>Request Form</h2>
<form action= "" name = "myForm" method="POST">
   <table style="width:100%" bgcolor="#efefef" >    
  <td>
  Student ID:<br>
  <input type="text" name="ID" >
  <br>

</td>
<td >
  <h4>First Period Prefrences</h4>
		<div class="tab1" >
  		First Prefrence:
			  <div class="select-style" >
			 	
			  <select name= "firstPeriod1">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>
				</select>
				</div>
				</div>
			<div class="tab1" >
  		Second Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "firstPeriod2">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>
				</select>
				</div>
				</div>
			<div class="tab1" >
  		Third Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "firstPeriod3">
			 <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>

				</select>
				</div>
				</div>
	</td>
	<td >
	<h4>Second Period Prefrences</h4>
		<div class="tab1" >
  		First Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "secondPeriod1">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>

				</select>
				</div>
				</div>
			<div class="tab1" >
  		Second Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "secondPeriod2">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>

				</select>
				</div>
				</div>
			<div class="tab1" >
  		Third Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "secondPeriod3">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>
				</select>
				</div>
				</div>
	</td>
	<td>
	<h4>Third Period Prefrences</h4>
		<div class="tab1" >
  		First Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "thirdPeriod1">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>

				</select>
				</div>
				</div>
			<div class="tab1" >
  		Second Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "thirdPeriod2">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>
				</select>
				</div>
				</div>
			<div class="tab1" >
  		Third Prefrence:
			  <div class="select-style" >
			 	
			  <select name = "thirdPeriod3">
			  <option value="0">CSRP</option>
			  <option value="1">Leave</option>
			  <option value="2">Academics</option>
			  <option value="3">Cyber</option>
			  <option value="4">Space</option>
			  <option value="5">Jump</option>
			  <option value="6">RPA</option>
			  <option value="7">Soaring</option>
			  <option value="8">BCT</option>
			  <option value="9">EST</option>
			  <option value="10">Operations AF</option>
			  <option value="11">Ops Group</option>
			  <option value="12">Summer Camp</option>

				</select>
				</div>
				</div>
	</td>
  </table>
			<?php 

						 // open connection to the database on LOCALHOST with 
						 // userid of 'root', password '', and database 'csl'

						 @ $db = new mysqli('LOCALHOST', 'root', '', 'summer_portal');

						 // Check if there were error and if so, report and exit

						 if (mysqli_connect_errno()) 
						 { 
						   echo 'ERROR: Could not connect to database.  Error is '.mysqli_connect_error();
						   exit;
						 }
						 if (isset($_POST['SubmitButton'])){
						     $inputID = $_POST['ID'];
							 $inputFirstPeriod1 = (int)$_POST['firstPeriod1'];
							 $inputFirstPeriod2 = (int)$_POST['firstPeriod2'];
							 $inputFirstPeriod3 = (int)$_POST['firstPeriod3'];
							 
							 $inputSecondPeriod1 = (int)$_POST['secondPeriod1'];
						     $inputSecondPeriod2 = (int)$_POST['secondPeriod2'];
						     $inputSecondPeriod3 = (int)$_POST['secondPeriod3'];
							 
							 $inputThirdPeriod1 = (int)$_POST['thirdPeriod1'];
							 $inputThirdPeriod2 = (int)$_POST['thirdPeriod2'];
							 $inputThirdPeriod3 = (int)$_POST['thirdPeriod3'];

						 }
						 // run the SQL query to retrieve the service partner info
						 $studentIDexists = $db->prepare('SELECT * FROM cadet WHERE studentID = ?;');
						 $studentIDexists->bind_param("i", $inputID);
						 $studentIDexists->execute();
						 $studentID = $studentIDexists->get_result();
						 
						 if($studentID->num_rows>0)
						 {
							echo 'in if statement';
							 $results = $db->prepare('REPLACE INTO tempSchedule (period1programID1,period1programID2 ,period1programID3 ,period2programID1,period2programID2,period2programID3 ,period3programID1 ,period3programID2,period3programID3,studentID) VALUES(?,?,?,?,?,?,?,?,?,?);');
							 $results->bind_param("iiiiiiiiii", $inputFirstPeriod1, $inputFirstPeriod2, $inputFirstPeriod3, $inputSecondPeriod1, $inputSecondPeriod2, $inputSecondPeriod3, $inputThirdPeriod1, $inputThirdPeriod2, $inputThirdPeriod3, $inputID);
							 $results->execute();
						 }
						 else
						 {
							 echo 'That ID does not exist';
						 }

						 // close the database connection
						
						 $db->close();

					   ?>
  
  
  
  
  <br>
  <input type="submit" value="Submit" name = "SubmitButton">
  </form>  
</div>            
</body>
